# 概念和关键词


## 网络边缘知识点


### 基本知识

> 分组 

当一台端系统向另一台端系统发送数据时，发送端把数据分段，并在每段添加首部字节

> 分组交换机

最著名的两类分组交换机：**路由器**和**链路层交换机**

> ISP

互联网提供商(Internet Service Provider)

> 边缘路由(edge router)

端系统到另一台远程端系统路径上的第一台路由器

> 接入网(access network)

端系统到边缘路由的物理链路

### 宽带接入类型

--------

> 宽带住宅接入有两种最流行的类型: 数字用户线路(DSL)和电缆(HFC)

> 数字用户线路(DSL)

Digital Subscriber Line,就是老的电话上网的方式

> 电缆因特网接入

住宅从提供有线电视的公司获得电缆因特网接入

特点：
    共享广播媒体，就是公用公共的下行信道和上行信道，当用的人多是，速度会慢

> 混合光纤同轴 HFC (Hybrid Fiber Coax)

它是电缆因特网接入的一种系统，光缆把电缆头连接到地区枢纽，然后使用传统的同轴电缆连接到各家各户

------------

> 光纤到户 FTTH(Fiber To The Home)

> 有源光网络 AON (Active Optical Network)

地区枢纽(本地交换局)到用户之间全部和部分采用光纤传输的通信系统

> 无源光网络 PON (Passive Optical Network)

* ONT 光网络设备  一种用户端的光网络终端
* OLT 光纤线路终端 提供光信号和电信号之间的转换

![PON](https://github.com/modonglinaguadu/study-note/blob/master/image/network/PON.png)


### 物理媒体

一个端系统传输一个比特，通过一系列链路和路由，到达另一个端系统。这其中经过了一系列的**传输器-接收器**对，对于“传输器-接收器”对，通过跨越一种物理媒体传播**电磁波**和**光脉冲**来发送该比特

> 物理媒体分为**引导媒体**和**非引导媒体**

* 引导媒体：电波沿着固体媒体前行，如光缆，双绞铜线，同轴电缆
* 非引导媒体：电波在空气中或外层空间中传播，如无线局域网，数字卫星频道

-----------

## 网络核心知识点

通过网络电路和交换机移动数据有两种基本方法：**分组交换**和**电路交换**

### 分组交换

> 报文(message)

在网络系统中，端系统彼此交换报文。报文可以是执行控制功能(如握手)，也可是包含数据(邮件，图片)

从源端系统向目的端系统发送报文，源端将报文划分为小的数据(分组),每个分组经过通信链路和分组交换机(主要有路由器和链路层交换机)

> 存储转发传输

分组交换机采用的是**存储转发传输**，即等待一个分组全部传输入分组交换机，并且缓存起来，再向下一个目的地发送该分组，所以这里会产生一个**存储转发时延**

> 输出缓存(输出队列)

分组交换机内有一个输出队列机制，在一个分组存储完成，准备向下一个链路传输时，发现该链路正在忙于传输其他分组，那么该分组就会在**输出缓存**中等待，因此，除了**存储转发时延**外，还产生了输出缓存的**排队时延**，而这个排队时延是变化的，取决于网络拥塞程度，因为输出缓存空间大小是有限了，如果网络拥塞，而输出缓存空间已经充满时，就会出现**分组丢包(丢包)**

> 转发表和路由选择协议

路由器将一条链路转发过来的分组存储转发向另一条链路，那么它是如何选择向哪条链路转发的呢？不通网络的方案不同，因特网的方案是如下：每个分组中包含目的端系统的ip地址，当分组到达路由器，路由器将通过ip地址(部分ip地址内容)搜索**转发表**，以发现适当的转发链路，ok，那问题来了，**转发表**是手工每台路由器逐一设置还是自动配置的呢？其实是因特网具有一些特殊的**路由选择协议**，用于自动设置这些转发表，后面再详细介绍

### 电路交换

在电路交换网络中，在端之间通信期间，会预留端系统之间通信路径所需要的资源(好比吃饭提前订置一样，饭店会预留位置)。

在传统的座机电话，就是电路交换的例子，当一个人通过电话网络向另一个人打电话或则传真，在发送方能够发送消息之前，该网络需要在发送方和接收方之间建立起一条连接，用电话的术语来说，该连接叫做一条**电路**

> 电路交换网络中的复用

主要有两种: **频分复用**(FDM) **时分复用**(TDM)

> 频分复用(FDM)

把链路上的所有频率划分为若干哥子频率，当创建一个连接时，为该连接指定一个专用的子频率。频率的宽度我们叫**带宽**。其实就是把链路上的总带宽划分为若干个子频段，每个频段上传输一路信号。这就要求总的频率宽度大于各个子频率之和，同时为了保证各个频段传输的信号互不干扰，应在各个子频段之间设立隔离带

> 时分复用(TDM)

链路上不用时段传输不通的信号,就是把时间分成若干帧，再把每一帧划分为固定的时间片(时隙)，当创建一个连接时，网络上每一帧为该连接分配一个指定的时隙。也就是以时间作为信号分割的参量，故必须使各路信号在时间轴上互不重叠。

---------

> 分组交换和电路交换比较

电路交换不考虑需求，预先分配了传输的使用，这使得已经分配而不需要的链路未利用。


### 网络结构

> POP(入网点)

POP点只是提供商网络中的一台或多台路由群组

在计算机网络中，POP是访问企业网络内部的进入点，外界提供的服务通过pop进入，这些服务包括internet接入，广域连接以及电话服务

在企业中，POP提供通往外部服务和站点服务的链路，POP可以直接连接到一家或多家ISP，企业的远程站点也可以通过POP连接在一起，这些远程站点之间的广域链路有服务商建立(可以从第三方通信供应商租借高速链路连接到POP点)

对于ISP来说，POP是一个将互联网从一个地方接入到其他地方的入网点

> 多宿

任何ISP都可以选择多宿，即可以与两个或多个提供商ISP连接

当选择多宿时，即使一个供应商出现故障时，它仍能够继续发送和接收分组

> 对等

客户ISP向提供商ISP按*流量*支付费用，为了节省费用，位于相同等级的相邻的ISP可以**对等**，也就是直接将他们的网络连接在一起，这使得流量而不是通过上行ISP传输，而是直接传输。对等不需要结算。

> 因特网交换点IXP(Internet Exchange Point)

IXP是个汇点，多个ISP可以在这里共同**对等**

> 网络结构4

就是由接入ISP，区域ISP，第一级ISP，POP，多宿，对等，IXP组成

> 网络结构5(现在的网络结构)

在网络结构4的顶层添加一个内容提供商网络

如谷歌在全球有大量的数据中心，谷歌数据中心都是专用的TCP/IP互联，该网络跨越全球，但仍独立于公共因特网

![PON](https://github.com/modonglinaguadu/study-note/blob/master/image/network/jiegou5.png)

### 分组中的时延，丢包，吞吐量

> 时延

简介:

分组从源端系统触发，经过一系列路由，到达目的端系统，经历了几种类型的时延，最主要的时延有**节点处理时延**，**排队时延**，**传输时延**，**传播时延**,这些时延总加起来就是节点总时延

总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延

![PON](https://github.com/modonglinaguadu/study-note/blob/master/image/network/delay.png)

> 节点处理时延

主机或路由器在收到分组时要花费一定的时间进行处理，例如分析分组的首部、从分组中提取数据部分、进行差错或查找适当的路由等等

> 排队时延

在前面我们有介绍，就是输出缓存所产生的时延，该时延长度取决于先到达正在等待向链路转发的分组的数量

> 发送时延(传播时延)

是主机或路由器发送分组所需要的时间，也就是从发送分组的第一个比特算起，到该分组的最后一个比特发送完毕所需的时间，发送时延 = 分组长度(b) / 信道带宽(b/s)

> 传播时延

是电磁波在信道(链路)中传播一定的距离需要花费的时间，传播时延 = 信道长度(m) / 电磁波在信道上的传播速率(m/s)

> 流量强度

这影响着排队时延，假定分组到达队列的速率是a(pkt/s),全部分组长度为L，那比特到达队列的速率为aL(bps),现在再假定R是传输速率，最后我们假定队列空间无线大，那么aL/R就是**流量强度**，当流量强度(La/R)大于1时，即比特到达队列速率大于传输速率，该队列趋于无限增加，排队时延趋于无限增大

![PON](https://github.com/modonglinaguadu/study-note/blob/master/image/network/traffic.png)

> 端到端的时延

我们一般用traceroute 来查看源端到目的端之间的时延情况

> 其他重要时延

* 作为它的协议的一部分，希望向共享媒体(wifi或电缆调制解调器)传输的端系统可以有意延迟其传输以与其他端系统共享媒体

* 媒体分组化时延，这种时延出现在经IP语音(VoIp)应用中，在VoIp中，在向因特网传输分组之前，必须首先使用编码的数字化语音填充一个分组，这种填充一个分组的时间，叫分组时延。它可能比较大，这会影响到用户感受到VoIp的呼叫质量

-------

> 丢包

当节点队列内存不足时，由于没有空间存放更多分组，就会把该分组丢弃掉

丢包随着**流量强度**的增加而增加

------

> 吞吐量

吞吐量是指对网络、设备、端口或其他设施在单位时间内成功地传送数据的数量（以比特、字节等测量单位），也就是说吞吐量是指在没有帧丢失的情况下，设备能够接收并转发的最大数据速率。


### 网络分层

![PON](https://github.com/modonglinaguadu/study-note/blob/master/image/network/layer.png)


> 有些工程师反对分层，理由如下

* 一层可能冗余较低层的功能

* 有些层的功能可能需要在其他层才会有的信息，这违反了分层分离的目标

> 应用层

应用层是**网络程序**和**应用层协议**存留的地方，包含很多协议，如HTTP，SMTP(提供了电子邮件报文的传输)，FTP(两个端系统之间文件传输),也包含网络层序，如DNS系统(域名系统)

我们把位于应用层的信息分组叫做**报文**

> 传输层

端系统上不同应用程序之间传输应用成报文，在因特网中有两个协议TCP和UDP，利用其中一个都能运输应用层报文

我们把位于传输层的分组叫做**报文段**

* TCP

TCP提供了面向连接服务，这种服务包含了如下：确保应用层报文传递到达目的地 和 流量控制(发送方/接收方 速率匹配)。TCP也把长报文划分为短报文，并提供了拥塞控制机制，即当网络拥塞时，抑制其传输速率

* UDP

UDP提供无面向连接服务，不提供其他不必要服务的服务，没有可靠性，没有流量控制，没有拥塞控制


> 网络层(IP层)

负责两个端点之间传输网络层分组，在源主机中，运输层协议向网络层提供报文段和目的地址

网络层包含著名的**IP协议**，该协议定义了数据报中的各个字段以及端系统和路由如何利用这些字段。IP协议是唯一的，所有具有网络层的组件都要运行IP协议。网络层还包含**路由的路由选择协议**

我们把网络层分组称为**数据报**

> 链路层

链路层在物理层提供的服务的基础上向网络层提供服务，其最基本的服务是将源自网络层的数据报可靠地传输到相邻节点的目的机网络层

链路层的基本传输单位是**帧**

> 物理层

如果链路层是将帧从一个网络节点传输给相邻的节点，那物理层就是将帧中一个个比特从一个节点传输给相邻节点

> 封装

![PON](https://github.com/modonglinaguadu/study-note/blob/master/image/network/encapsulation.png)

应用层报文在传输层，封装成报文段，在网络层封装成数据报，在链路层被封装成帧。就是每一层添加首部字段，所以每一层分组都有两类型字段：**首部字段**和**有效载荷字段**(通常是来自上一层的分组)

### 网络安全

1. 恶意软件植入主机，我们的主机成为类似受害设备网络的一员，它们统称僵尸网络，攻击者利用僵尸网络的控制，并向目的主机发起垃圾邮件分发或者分布式拒绝服务攻击。大多数恶意软件有自我复制功能，在感染一台主机之后，会自动扫描易感染主机，然后自我复制感染它。**病毒**是需要某种用户交互来感染用户设备的恶意软件。**蠕虫**是无需明显用户交互能进入设备的恶意软件

2. 拒绝服务攻击(洪水攻击)(DoS攻击)，使网络，主机或其他设备不能由正常用户使用。如web服务器，邮件服务器，DNS服务器和机构网络常常成为DoS攻击的目标。大多数因特网DoS攻击分为一下三种
    * **弱点攻击**，这涉及向一台主机上运行易攻击的应用程序或操作系统发送精致的报文。如果适当顺序的多个分组发送给易攻击的应用程序或操作系统，那该服务器可能停止运行，或者更糟糕的是主机崩溃
    * **带宽洪泛**，向目标主机发送大量的分组，过多分组使得目标接入链路变得拥塞，使得合法分组无法到达服务器
    * **连接洪泛**，攻击者在目标主机创建大量半开或全开的TCP连接，主机因这些连接陷入困境，并无法接收合法连接

    我们详细的了解带宽洪泛攻击，如果某服务器的接入速率为R(bps)的化，攻击者则需要以大约R的速率产生危害，如果服务器的速率R非常大的化，单一源攻击将无法产生足够的流量来伤害服务器。而且如果从单一源发出所有流量的化，上游路由器可以检测该流量，并在靠近服务器前阻拦下来。所以使用分布式Dos攻击(DDoS),利用多个源(僵尸网络)向目标猛烈发送流量

    ![PON](https://github.com/modonglinaguadu/study-note/blob/master/image/network/DDoS.png)

3. 分组嗅探器，在无线网络中(wifi 蜂窝因特网)，使用分组嗅探器接收到传输中分组的副本。分组嗅探器也能作用于有线网络，防范分组嗅探器的方法是密码学，对信息进行加密

4. 伪装成信任用户，伪造一个拥有源地址，内容，目的地址的分组，然后因特网把该伪造分组发送到目的地。目的地处理执行该分组。将具有虚假源地址的分组注入因特网的能力叫**IP哄骗**，为了解决该问题，我们需要采用**端点鉴别**